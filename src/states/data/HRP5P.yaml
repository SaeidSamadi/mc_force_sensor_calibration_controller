HRP5P::InitialPosture_:
  base: MetaTasks
  tasks:
    Posture:
      type: posture
      robotIndex: 0
      stiffness: 10
      weight: 1000
      target:
        LSP: [0.0]
        RSP: [0.0]
      completion:
        eval: 0.01

HRP5P::CalibrationMotion_:
  base: CalibrationMotion
  joints:
    # Left wrist
  - name: LWRR
    period: 6
  - name: LWRP
    period: 9
  - name: LWRY
    period: 15
    # Right wrist
  - name: RWRR
    period: 6
  - name: RWRP
    period: 9
  - name: RWRY
    period: 15
  duration: 30
  stiffness: 10

HRP5P::Calibrate_:
  base: Parallel
  states: [CalibrationMotionLogging, HRP5P::CalibrationMotion_]
  configs:
    CalibrationMotionLogging:
      outputPath: /tmp/calib-force-sensors
      forceSensors:
      - [LeftHandForceSensor, forceLH]
      - [RightHandForceSensor, forceRH]
      - [LeftFootForceSensor, forceLF]
      - [RightFootForceSensor, forceRF]

HRP5P::CheckCalibration_:
  base: Parallel
  states: [HRP5P::CalibrationMotion_, CheckResults]
  configs:
    CheckResults:
      forceSensors:
      - LeftHandForceSensor
      - RightHandForceSensor
      - LeftFootForceSensor
      - RightFootForceSensor

HRP5P::Calibrate:
  base: Meta
  transitions:
  - [HRP5P::InitialPosture_, OK, HRP5P::Calibrate_, Auto]
  - [HRP5P::Calibrate_, OK, RunCalibrationScript, Auto]
  - [RunCalibrationScript, SUCCESS, HRP5P::CheckCalibration_, Auto]
  - [RunCalibrationScript, FAILED, HalfSitting, Auto]
  - [HRP5P::CheckCalibration_, OK, HalfSitting, Auto]
